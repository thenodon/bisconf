#{extends 'main.html' /}
#{set title: 'Hours' /}

<h1>
&{'ListHours'}    
</h1>

<div class="downlink">
<ul>
<li>
<a href="@{addHour()}">&{'Add'}</a>
</li>
<li>
<a href="@{index()}">&{'Back'}</a>
</li>
<ul>
</div>

#{if hour2def}
    <table class="listtable">
        <thead>
            <tr>
                <th>&{'HourId'}</th>
                <th>&{'UsedIn'}</th>
                <th>&{'Action'}</th>
            </tr>
        </thead>
        <tbody>
            #{list hour2def, as:'hour'}
                <tr>
                    <td>${hour.key}</td>
                    <td>
                        <table>
                        #{list hour.value, as:'def'}
                        
                        <tr>
                        <td>
                        ${def.hostname}
                        </td>
                        <td>
                        ${def.servicename}
                        </td>
                        <td>
                        ${def.serviceitemname}
                        </td>
                        </tr>
                        #{/list}
                        </table>
                    </td>
                    
                    <td>
                    
                        <a href="@{editHour(hour.key)}">&{'Edit'}</a>
                        #{if (hour2def.get(hour.key)).size() == 0 }
                            <a href="@{deleteHour(hour.key)}">&{'Delete'}</a>
                        #{/if}
                    </td>
                </tr>
            #{/list}
        </tbody>
    </table>
    
#{/if}

